
{% extends "base.html" %}

{% block content %}
<a href="/league" class="back-link">‚Üê Back to League Explorer</a>

<div class="player-page">

  <div class="player-header">
    <img src="{{ stats.img }}" class="headshot" alt="{{ player_name }} headshot">
    <div class="player-meta">
      <h1 class="player-name-page" id="player-name">{{ player_name }}</h1>
      <p class="player-team" id="team">{{ team }}</p>
      <span id="season" style="display:none;">{{ season }}</span>
    </div>
  </div>

  <div class="player-stats-roles">
    <div class="card player-stats">
      <h2>Basic Stats</h2>
      <ul>
        <li><strong>Points:</strong> {{ stats.points }}</li>
        <li><strong>FG%:</strong> {{ stats.fg_pct }}</li>
        <li><strong>Minutes:</strong> {{ stats.minutes }}</li>
        <li><strong>Passes Made:</strong> {{ stats.passes_made }}</li>
        <li><strong>Passes Received:</strong> {{ stats.passes_received }}</li>
        <li><strong>Pass Ratio:</strong>
          {% if stats.passes_received %}
            {{ (stats.passes_made / stats.passes_received) | round(2) }}
          {% else %}
            N/A
          {% endif %}
        </li>
      </ul>
    </div>

    <div class="card player-roles">
      <h2>Role Scores</h2>
      <ul>
        {% for role in ['hub_score', 'finisher_score', 'distributor_score', 'black_hole_score'] %}
          {% if stats.get(role) %}
            <li><strong>{{ role.replace('_score', '').replace('_', ' ') | title }}:</strong> {{ stats[role] | round(2) }}</li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="player-visuals-grid">
    <div class="card">
      <h2>Passing Network</h2>
      <div id="player-network"></div>
    </div>
    <div class="card">
      <h2>Shot Chart</h2>
      <svg id="court-svg" width="431" height="405.14" viewBox="0 0 431 405.14"></svg>
    </div>
  </div>

</div>

<script id="player-edges-data" type="application/json">{{ edges | tojson }}</script>
<script id="player-nodes-data" type="application/json">{{ nodes | tojson }}</script>
<script type="module" src="{{ url_for('static', filename='player.js') }}"></script>
{% endblock %}



